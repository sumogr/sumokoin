name: Continuous_Integration_Testing

on: [push, pull_request]

jobs:

  cross-build-linux-32bit-binaries-on-xenial:
    runs-on: windows-latest
    steps:
    - uses: actions/checkout@v1
    - name: clean ubuntu
      run: |
        Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux
        curl.exe -L -o https://aka.ms/wsl-ubuntu-1804
        Rename-Item .\Ubuntu_1804.2019.522.0_x64.appx .\Ubuntu.zip
        Expand-Archive .\Ubuntu.zip .\Ubuntu
        cd Ubuntu
        ubuntu.exe
        $userenv = [System.Environment]::GetEnvironmentVariable("Path", "User")
        [System.Environment]::SetEnvironmentVariable("PATH", $userenv + ";C:\Users\Administrator\Ubuntu", "User")
    - name: clean ubuntu
      run: |        
        WSL.exe
        sudo lsb_release -a
