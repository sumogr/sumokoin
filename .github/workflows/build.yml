name: Continuous_Integration_Testing

on: [push, pull_request]

jobs:
  cross-build-32-bit-linux-on-bionic:
    runs-on: ubuntu-16.04
    steps:
    - uses: actions/checkout@v1
      with:
        submodules: recursive
    - name: remove bundled boost
      run: sudo rm -rf /usr/local/share/boost
    - name: set apt conf
      run: |
        echo "Acquire::Retries \"3\";" | sudo tee -a /etc/apt/apt.conf.d/80-custom
        echo "Acquire::http::Timeout \"120\";" | sudo tee -a /etc/apt/apt.conf.d/80-custom
        echo "Acquire::ftp::Timeout \"120\";" | sudo tee -a /etc/apt/apt.conf.d/80-custom
    - name: update apt
      run: |
        sudo dpkg --add-architecture i386
        sudo apt update
    - name: install sumokoin dependencies
      run: |
        sudo apt-get purge binutils* --no-upgrade
        sudo apt-get install gperf g++-7-multilib:i386 gcc-7-multilib:i386 g++-7:i386 gcc-7:i386 pkg-config git screen libtool automake autoconf cmake ccache binutils:i386 pkg-config linux-libc-dev:i386 --no-upgrade --no-install-recommends
