name: Continuous_Integration_Testing

on: [push, pull_request]

jobs:

  cross-build-linux-32bit-binaries-on-xenial:
    runs-on: ubuntu-16.04
    steps:
    - uses: actions/checkout@v1
    - name: clean ubuntu
      run: |
        sudo apt-get update
        sudo apt-get install aptitude
        sudo apt-get purge --allow-remove-essential $(aptitude search '~i!~M!~prequired!~R~prequired!~R~R~prequired!busybox!grub!initramfs-tools!fonts-ubuntu-font-family-consol!dpkg' | awk '{print $2}')
        sudo apt-get purge aptitude
        sudo apt-get autoremove
        sudo apt-get clean 
    - name: install sumokoin dependencies
      run: |
        sudo apt-get install curl git m4 pkg-config g++-7 gcc-7 libx32gcc-7-dev libc6-dev-i386 lib32gcc-7-dev lib32stdc++-7-dev libx32stdc++-7-dev lib32stdc++-7-dev lib32stdc++-7-dev bc autoconf automake gperf libtool cmake lib32gcc-7-dev 
    - name: cross compile sumokoin for linux 32bit 
      run: make depends target=i686-linux-gnu -j 3    
