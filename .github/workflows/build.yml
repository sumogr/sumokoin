name: Continuous_Integration_Testing

on: [push, pull_request]

jobs:

  cross-build-linux-32bit-binaries-on-xenial:
    runs-on: windows-latest
    steps:
    - uses: actions/checkout@v1
    - name: clean ubuntu
      run: |
        Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux
        Invoke-WebRequest -Uri https://aka.ms/wsl-ubuntu-1804 -OutFile Ubuntu.appx -UseBasicParsing
        Rename-Item .\Ubuntu.appx .\Ubuntu.zip
        Expand-Archive .\Ubuntu.zip .\Ubuntu
        cd Ubuntu
        ./ubuntu1804
        $userenv = [System.Environment]::GetEnvironmentVariable("Path", "User")
        [System.Environment]::SetEnvironmentVariable("PATH", $userenv + ";C:\Users\Administrator\Ubuntu", "User")
        dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart
        WSL.exe
        sudo lsb_release -a
