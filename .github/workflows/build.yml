name: Continuous_Integration_Testing

on: [push, pull_request]

jobs:

  cross-build-linux-32bit-binaries-on-xenial:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1
    - name: clean ubuntu
      run: |
        sudo apt-get update
        sudo apt-get install aptitude
        sudo apt-get purge $(aptitude search '~i!~M!~prequired!~pimportant!~R~prequired!~R~R~prequired!~R~pimportant!~R~R~pimportant!busybox!grub!initramfs-tools' | awk '{print $2}')
        sudo apt-get purge aptitude
        sudo apt-get autoremove
        sudo apt-get clean 
    - name: install sumokoin dependencies
      run: |
        sudo apt-get install curl git m4 pkg-config g++-7 gcc-7 libx32gcc-7-dev libc6-dev-i386 lib32gcc-7-dev lib32stdc++-7-dev libx32stdc++-7-dev lib32stdc++-7-dev lib32stdc++-7-dev bc autoconf automake gperf libtool cmake lib32gcc-7-dev 
    - name: cross compile sumokoin for linux 32bit 
      run: make depends target=i686-linux-gnu -j 3    
