name: Continuous_Integration_Testing

on: [push, pull_request]

jobs:
  cross-build-32-bit-linux-on-bionic:
    runs-on: ubuntu-16.04
    steps:
    - uses: actions/checkout@v1
      with:
        submodules: recursive
    - name: remove bundled boost
      run: sudo rm -rf /usr/local/share/boost
    - name: set apt conf
      run: |
        echo "Acquire::Retries \"3\";" | sudo tee -a /etc/apt/apt.conf.d/80-custom
        echo "Acquire::http::Timeout \"120\";" | sudo tee -a /etc/apt/apt.conf.d/80-custom
        echo "Acquire::ftp::Timeout \"120\";" | sudo tee -a /etc/apt/apt.conf.d/80-custom
    - name: update apt
      run: |
        sudo dpkg --add-architecture i386
        sudo apt update
    - name: uninstall sumokoin dependencies
      run: sudo apt-get purge binutils* *gcc* *g++* linux-libc-* lib64gcc* libc6-dev* 
    - name: install sumokoin dependencies
      run: sudo apt-get install gperf gcc-7 g++-7 g++-7-multilib gcc-7-multilib pkg-config git screen libtool automake autoconf cmake ccache binutils-gold pkg-config linux-libc-dev:i386 --no-install-recommends
